<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Packages - Cosmos Holiday Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-8">Add Sample Packages to Firestore</h1>

    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
      <h2 class="text-xl font-semibold mb-4">Instructions:</h2>
      <ol class="list-decimal list-inside space-y-2 text-gray-700">
        <li>Make sure you've updated <code class="bg-gray-200 px-2 py-1 rounded">js/config.js</code> with your Firebase
          credentials</li>
        <li>Click the button below to add sample packages</li>
        <li>Check your Firestore console to verify packages were added</li>
        <li>Refresh <code class="bg-gray-200 px-2 py-1 rounded">index.html</code> to see packages displayed</li>
      </ol>
    </div>

    <button id="addPackagesBtn"
      class="bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-blue-700 shadow-lg">
      Add Sample Packages to Firestore
    </button>

    <div id="status" class="mt-6"></div>

    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-8">
      <p class="text-sm text-yellow-800">
        <strong>Note:</strong> This will add 11 sample packages to your Firestore database.
        You can modify or delete them later from the Firebase Console.
      </p>
    </div>
  </div>

  <script type="module">
    import { db } from './js/config.js';
    import { collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const samplePackages = [
      // Latest Packages
      {
        name: "SUN SIYAM IRU FUSHI - MALDIVES",
        description: "Luxury beach resort with overwater villas and pristine beaches",
        price: 69000,
        duration: "4 Days",
        category: "Maldives",
        type: "international",
        featured: "latest",
        packageType: "regular",
        discount: 15,
        image: "https://images.unsplash.com/photo-1514282401047-d79a71a590e8?w=400&h=250&fit=crop"
      },
      {
        name: "FIHALHOHI ISLAND RESORT - MALDIVES",
        description: "Paradise island getaway with crystal clear waters",
        price: 60500,
        duration: "4 Days",
        category: "Maldives",
        type: "international",
        featured: "latest",
        packageType: "regular",
        discount: 20,
        image: "https://images.unsplash.com/photo-1573843981267-be1999ff37cd?w=400&h=250&fit=crop"
      },
      {
        name: "BANGKOK - PATTAYA TOUR",
        description: "Explore Thailand's vibrant cities and beaches",
        price: 45000,
        duration: "5 Days",
        category: "Thailand",
        type: "international",
        featured: "latest",
        packageType: "regular",
        discount: 10,
        image: "https://images.unsplash.com/photo-1508009603885-50cf7c579365?w=400&h=250&fit=crop"
      },
      {
        name: "DUBAI SHOPPING FESTIVAL",
        description: "Shop till you drop in the city of gold",
        price: 85000,
        duration: "6 Days",
        category: "UAE",
        type: "international",
        featured: "latest",
        packageType: "regular",
        discount: 12,
        image: "https://images.unsplash.com/photo-1512453979798-5ea266f8880c?w=400&h=250&fit=crop"
      },
      // Recommended Packages
      {
        name: "KUNMING, BEIJING & SHANGHAI - CHINA",
        description: "Discover ancient and modern China in one trip",
        price: 112000,
        duration: "8 Days",
        category: "China",
        type: "international",
        featured: "recommended",
        packageType: "regular",
        discount: 8,
        image: "https://images.unsplash.com/photo-1508804185872-d7badad00f7d?w=400&h=250&fit=crop"
      },
      {
        name: "LONDON-SCOTLAND TOUR",
        description: "Historic UK adventure through England and Scotland",
        price: 270990,
        duration: "6 Nights / 12 Days",
        category: "UK",
        type: "international",
        featured: "recommended",
        packageType: "regular",
        discount: 5,
        image: "https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=400&h=250&fit=crop"
      },
      {
        name: "SINGAPORE CITY TOUR",
        description: "Modern city-state exploration with Gardens by the Bay",
        price: 55000,
        duration: "4 Days",
        category: "Singapore",
        type: "international",
        featured: "recommended",
        packageType: "regular",
        discount: 10,
        image: "https://images.unsplash.com/photo-1525625293386-3f8f99389edd?w=400&h=250&fit=crop"
      },
      {
        name: "BALI PARADISE PACKAGE",
        description: "Tropical Indonesian getaway with temples and beaches",
        price: 68000,
        duration: "5 Days",
        category: "Indonesia",
        type: "international",
        featured: "recommended",
        packageType: "regular",
        discount: 15,
        image: "https://images.unsplash.com/photo-1537996194471-e657df975ab4?w=400&h=250&fit=crop"
      },
      // Additional Packages
      {
        name: "COX'S BAZAR BEACH RESORT",
        description: "Bangladesh's longest natural beach - perfect for students",
        price: 15000,
        duration: "3 Days",
        category: "Domestic",
        type: "domestic",
        featured: "regular",
        packageType: "regular",
        discount: 0,
        image: "https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=250&fit=crop"
      },
      {
        name: "TURKEY HISTORICAL TOUR",
        description: "Group tour of Istanbul, Cappadocia & Pamukkale",
        price: 95000,
        duration: "7 Days",
        category: "Turkey",
        type: "international",
        featured: "regular",
        packageType: "group",
        discount: 18,
        image: "https://images.unsplash.com/photo-1524231757912-21f4fe3a7200?w=400&h=250&fit=crop"
      },
      {
        name: "MAKKAH & MADINAH UMRAH",
        description: "Special Eid Umrah package with premium accommodation",
        price: 125000,
        duration: "10 Days",
        category: "Saudi Arabia",
        type: "international",
        featured: "recommended",
        packageType: "eid",
        discount: 0,
        image: "https://images.unsplash.com/photo-1591604129939-f1efa4d9f7fa?w=400&h=250&fit=crop"
      }
    ];

    document.getElementById('addPackagesBtn').addEventListener('click', async () => {
      const btn = document.getElementById('addPackagesBtn');
      const status = document.getElementById('status');

      btn.disabled = true;
      btn.textContent = 'Adding packages...';
      btn.classList.add('opacity-50', 'cursor-not-allowed');

      status.innerHTML = '<div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded">Adding packages to Firestore...</div>';

      try {
        let successCount = 0;
        const results = [];

        for (const pkg of samplePackages) {
          try {
            const docRef = await addDoc(collection(db, 'packages'), pkg);
            successCount++;
            results.push(`<li class="text-green-600">✓ Added: ${pkg.name}</li>`);
          } catch (error) {
            results.push(`<li class="text-red-600">✗ Failed: ${pkg.name} - ${error.message}</li>`);
          }
        }

        status.innerHTML = `
                    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
                        <strong>Success!</strong> Added ${successCount} out of ${samplePackages.length} packages to Firestore.
                    </div>
                    <div class="bg-white p-4 rounded shadow">
                        <h3 class="font-semibold mb-2">Details:</h3>
                        <ul class="space-y-1 text-sm">${results.join('')}</ul>
                    </div>
                    <div class="mt-4">
                        <a href="index.html" class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
                            View Packages on Website
                        </a>
                    </div>
                `;

        btn.textContent = 'Packages Added Successfully!';
        btn.classList.add('bg-green-600');

      } catch (error) {
        status.innerHTML = `
                    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
                        <strong>Error!</strong> ${error.message}
                        <br><br>
                        <strong>Common issues:</strong>
                        <ul class="list-disc list-inside mt-2">
                            <li>Make sure you've updated js/config.js with your Firebase credentials</li>
                            <li>Check that Firestore is enabled in your Firebase project</li>
                            <li>Verify your Firestore security rules allow writes</li>
                        </ul>
                    </div>
                `;

        btn.disabled = false;
        btn.textContent = 'Try Again';
        btn.classList.remove('opacity-50', 'cursor-not-allowed');
      }
    });
  </script>
</body>

</html>